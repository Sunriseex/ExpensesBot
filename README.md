# Telegram Expense Tracker Bot

## Описание проекта

Telegram-бот для учета расходов с поддержкой команд для управления тратами, получения статистики и экспорта данных. Бот использует PostgreSQL для хранения данных, Redis для кеширования, Logrus для логирования и Prometheus для мониторинга.

## Возможности

- Добавление, редактирование и удаление трат
- Просмотр списка последних трат
- Получение статистики по категориям
- Топ категорий по расходам
- Экспорт данных в CSV
- Очистка кеша
- Мониторинг с Prometheus

## Технологии

- **Язык**: Golang
- **База данных**: PostgreSQL 16
- **Кеширование**: Redis
- **Логирование**: Logrus
- **Мониторинг**: Prometheus
- **Фреймворк API**: Gin
- **Контейнеризация**: Docker, Docker Compose

## Установка и запуск

### Требования:
- Docker + Docker Compose
- Telegram Bot API Token

### Настройка окружения
Создайте `.env` файл и укажите параметры:
```sh
TELEGRAM_BOT_TOKEN=your_bot_token
DATABASE_URL=postgres://user:password@db:5432/expenses
REDIS_URL=redis:6379
WEB_PORT=8080
```

### Запуск с Docker Compose
```sh
docker-compose up --build
```

## Команды бота

### Основные команды:
- `/add <сумма> <категория>` – добавить трату (например, `/add 500 еда`)
- `/list` – показать последние 10 трат
- `/stats <week/month>` – статистика за период
- `/stats_category <категория> [week/month]` – статистика по категории
- `/top_categories` – топ категорий
- `/export` – экспорт в CSV
- `/edit <id> <сумма> [категория]` – редактировать запись
- `/delete <id>` – удалить запись
- `/clear_cache` – очистить кеш
- `/help` – список команд

## Метрики Prometheus
- Доступны по адресу: `http://localhost:8080/metrics`

## Структура проекта
```sh
.
├── bot          # Основная логика бота
├── db           # Взаимодействие с PostgreSQL
├── cache        # Логика кеширования в Redis
├── monitoring   # Настройка Prometheus
├── config       # Конфигурация окружения
├── web          # Веб-интерфейс статистики
├── tests        # Тесты
├── main.go      # Точка входа
└── docker-compose.yml  # Конфигурация контейнеров
```

## Лицензия
Проект распространяется под лицензией MIT.
